<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Rez: Elements &amp; Directives Catalog</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Rez: Elements &amp; Directives Catalog</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_elements">Elements</a></li>
<li><a href="#_directives">Directives</a></li>
<li><a href="#_alias_directive">Alias (Directive)</a></li>
<li><a href="#_actor">Actor</a></li>
<li><a href="#_asset">Asset</a></li>
<li><a href="#_card">Card</a></li>
<li><a href="#_declare_directive">Declare (Directive)</a></li>
<li><a href="#_derive_directive">Derive (Directive)</a></li>
<li><a href="#_effect">Effect</a></li>
<li><a href="#_faction">Faction</a></li>
<li><a href="#_filter_directive">Filter (Directive)</a></li>
<li><a href="#_game">Game</a></li>
<li><a href="#_group">Group</a></li>
<li><a href="#_inventory">Inventory</a></li>
<li><a href="#_item">Item</a></li>
<li><a href="#_location">Location</a></li>
<li><a href="#_list">List</a></li>
<li><a href="#_object">Object</a></li>
<li><a href="#_plot">Plot</a></li>
<li><a href="#_relationship">Relationship</a></li>
<li><a href="#_scene">Scene</a></li>
<li><a href="#_script_directive">Script (Directive)</a></li>
<li><a href="#_example_19">Example</a></li>
<li><a href="#_slot">Slot</a></li>
<li><a href="#_style_directive">Style (Directive)</a></li>
<li><a href="#_system">System</a></li>
<li><a href="#_task_directive">Task (Directive)</a></li>
<li><a href="#_zone">Zone</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Rez includes many elements that you will combine to create your game, starting
with the <code>@game</code> element that wraps the whole thing.</p>
</div>
<div class="paragraph">
<p>All elements in a Rez source file are prefixed by <code>@</code>.</p>
</div>
<div class="paragraph">
<p>A few Rez elements like <code>@game</code> and <code>@zone</code> contain other elements but most do
not.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_elements">Elements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Elements describe in-game concepts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_actor">Actor</a></p>
</li>
<li>
<p><a href="#_asset">Asset</a></p>
</li>
<li>
<p><a href="#_card">Card</a></p>
</li>
<li>
<p><a href="#_effect">Effect</a></p>
</li>
<li>
<p><a href="#_faction">Faction</a></p>
</li>
<li>
<p><a href="#_game">Game</a></p>
</li>
<li>
<p><a href="#_group">Group</a></p>
</li>
<li>
<p><a href="#_inventory">Inventory</a></p>
</li>
<li>
<p><a href="#_item">Item</a></p>
</li>
<li>
<p><a href="#_list">List</a></p>
</li>
<li>
<p><a href="#_location">Location</a></p>
</li>
<li>
<p><a href="#_object">Object</a></p>
</li>
<li>
<p><a href="#_plot">Plot</a></p>
</li>
<li>
<p><a href="#_relationship">Relationship</a></p>
</li>
<li>
<p><a href="#_scene">Scene</a></p>
</li>
<li>
<p><a href="#_slot">Slot</a></p>
</li>
<li>
<p><a href="#_system">System</a></p>
</li>
<li>
<p><a href="#_zone">Zone</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_directives">Directives</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Directives modify in-game concepts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_alias_directive">Alias</a></p>
</li>
<li>
<p><a href="#_derive_directive">Derive</a></p>
</li>
<li>
<p><a href="#_declare_directive">Declare</a></p>
</li>
<li>
<p><a href="#_filter_directive">Filter</a></p>
</li>
<li>
<p><a href="#Generator (Directive)">Generator</a></p>
</li>
<li>
<p><a href="#_script_directive">Script</a></p>
</li>
<li>
<p><a href="#_style_directive">Style</a></p>
</li>
<li>
<p><a href="#_task_directive">Task</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_alias_directive">Alias (Directive)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>@alias</code> directive allows the author to refer to a particular kind of element using a convenient and meaningful name. It is usually used in conjunction with parent specifiers. For example it might be more meaningful to define <code>@sword</code> and <code>@shield</code> as aliases for particular kinds of <code>@item</code>.</p>
</div>
<div class="sect2">
<h3 id="_example">Example</h3>
<div class="paragraph">
<p>In our Maltese Parrot game hats are a big deal and a range of hat items will be needed but we don&#8217;t want to repeat ourselves defining each one using <code>@item</code> so we can create an alias that specifies that a hat is an item and how hats are, generally, configured. Then our hat definition just needs to supply what&#8217;s different about <em>that</em> hat.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@item hat begin
  type: :hat
  wearable: true
  usable: false
  bogie_would_approve: false
end

@alias hat = item&lt;hat&gt;

@hat wool_fedora begin
  material: :wool
  colour: :black
  description: "A Messer black wool fedora hat"
  bogie_would_approve: true
end

@hat brown_derby begin
  material: :felt
  colour: :brown
  description: "Battered brown derby"
end</pre>
</div>
</div>
<div class="paragraph">
<p>In this example we have made an alias, <code>@hat</code> for <code>@item</code> specifying a parent id <code>hat</code>. Using <code>@hat</code> creates new <code>@item`s that specify the `hat</code> item as their parent. Equalivent to:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@item wool_fedora&lt;hat&gt; begin
  ...
end</pre>
</div>
</div>
<div class="paragraph">
<p>Note that an alias can specify multiple parents.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actor">Actor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An actor represents an in-game character which could be the player avatar or a non-playable character that the player interacts with. Define an actor with the <code>@actor</code> element. In-game actors are represented by the <a href="jsapi.html#RezActor">RezActor</a> object.</p>
</div>
<div class="paragraph">
<p>Actors are an optional concept and a simple game might not need them, choosing instead to represent any actors via attributes of the game or scene. But in more complex games it&#8217;s useful to be able to model actors separately.</p>
</div>
<div class="sect2">
<h3 id="_example_2">Example</h3>
<div class="paragraph">
<p>In this example of our game the player can decide which of the antagonists they wish to play as. Each has different abilities and trust other characters different amounts.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@actor sam_spade begin
  name: "Sam Spade"
  stats: {
    gunplay: 6
    fisticuffs: 7
    drinking: 8
    flirting: 6
    sluething: 9
    chat: 6
  }
  container: #sams_stuff
end

@rel #sam_spade #miss_wonderly +2
@rel #sam_spade #joel_cairo -2
@rel #sam_spade #kaspar_gutman -4

@actor joel_cairo begin
  name: "Joel Cairo"
  stats: {
    gunplay: 3
    fisticuffs: 3
    drinking: 5
    flirting: 9
    sleuthing: 6
    chat: 8
  }
  container: #joels_stuff
end

@rel #joel_cairo #sam_spade 1
@rel #joel_cairo #miss_wonderly -1
@rel #joel_cairo #kaspar_gutman -3

@actor miss_wonderly begin
  name: "Ruth Wonderly"
  stats: {
    gunplay: 4
    fisticuffs: 2
    drinking: 5
    flirting: 10
    sleuthing: 4
    chat: 9
  }
  container: #ruths_stuff
end

@rel #miss_wonderly #sam_spade 4
@rel #miss_wonderly #joel_cairo 1
@rel #miss_wonderly #kaspar_gutman -2

@actor kaspar_gutman begin
  name: "Kaspar Gutman"
  stats: {
    gunplay: 1,
    fisticuffs: 3,
    drinking: 9,
    flirting: 2,
    sleuthing: 7,
    chat: 9
  }
  container: #kaspar_stuff
end

@rel #kaspar_gutman #sam_spade 2
@rel #kaspar_gutman #miss_wonderly -2
@rel #kaspar_gutman #joel_cairo 1</pre>
</div>
</div>
<div class="paragraph">
<p>By using a set of <code>@actor`s we can keep things separate and easier to understand and use the built-in `@rel</code> directive to create relationships between the actors.</p>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes">Required Attributes</h3>

</div>
<div class="sect2">
<h3 id="_optional_attributes">Optional Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a set of keyword tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>container</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Ref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id of the inventory that represents items carried by this actor</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_event_handlers">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_accept_item">on_accept_item</h4>
<div class="literalblock">
<div class="content">
<pre>on_accept_item(actor, event) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>event</code> argument is a map in the form:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  decision: &lt;decision_obj&gt;,
  inventory_id: &lt;id&gt;,
  slot_id: &lt;id&gt;,
  item_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>This is a script that can be called to check whether an item can be placed into an inventory slot of a container that they are owner of (See also: inventory#owner)</p>
</div>
<div class="literalblock">
<div class="content">
<pre>on_accept_item: (actor, event) =&gt; {
  event.decision.no(actor.name + " doesn't want to be burdened by worldly
  goods.");
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_init">on_init</h4>
<div class="literalblock">
<div class="content">
<pre>on_init: (actor, event = {}) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_enter">on_enter</h4>
<div class="literalblock">
<div class="content">
<pre>on_enter: (actor, event) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>event</code> argument is a map</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  location_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>This callback will be received when the actor is moved to a new location and is
passed the id of the location to which the actor has moved.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_leave">on_leave</h4>
<div class="literalblock">
<div class="content">
<pre>on_leave: (actor, event) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>event</code> argument is a map</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  location_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>This callback will be received when the actor has left a location and is passed the id of the location which has been vacated.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_turn">on_turn</h4>
<div class="literalblock">
<div class="content">
<pre>on_turn: (actor, event = {}) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>If the game turn mechanism is being used this callback will be received on each game turn. This is intended for simple cases and if you need to coordinate behaviours across multiple elements it may be better to use a system instead.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asset">Asset</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>@asset</code> element refers to a file on disk, typically an image, audio, or video file, that will be presented in game.</p>
</div>
<div class="paragraph">
<p>Rez automatically copies asset files into the game distribution folder when the game is compiled and manages pathing so that assets can be referred to in game without worrying about filenames and paths.</p>
</div>
<div class="paragraph">
<p>Assets can be collected into groups (using <a href="#_group"><code>@group</code></a>) dynamically choose from among related assets.</p>
</div>
<div class="sect2">
<h3 id="_example_3">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@asset hat_01 begin
  file_name: "hat_01.png"
  tags: #{:hat}
end</pre>
</div>
</div>
<div class="paragraph">
<p>This defines an asset that will be copied into the game when built and which can be referred to in-game by it&#8217;s id.</p>
</div>
<div class="paragraph">
<p>Rez will ensure that all assets are available during compilation.</p>
</div>
<div class="paragraph">
<p>Assets are the key to using asset groups that can be used for showing different but randomised media.</p>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_2">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>file_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name of the asset file in the assets folder</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_2">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_2">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_2">on_init</h4>
<div class="literalblock">
<div class="content">
<pre>on_init: (asset, event = {}) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has started.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_card">Card</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cards are the basic unit of content &amp; interaction in a Rez game. Cards are "played" into a scene to present what is happening to the user and offer them choices about what to do next. In this they serve a similar role to Twine passages.</p>
</div>
<div class="paragraph">
<p>The <code>content</code> attribute is key as it defines the template that is rendered each time the card is played. Optionally a card may also define <code>flipped_content</code> which is what is displayed in a scene using a stack layout after the card has been used (i.e. the player has followed a link from that card).</p>
</div>
<div class="paragraph">
<p>Cards can be part of the main interface but can also be used as blocks in other cards. For example a card could be defined to represent a sidebar and included into scene layout.</p>
</div>
<div class="paragraph">
<p>Internally the <code>content</code> and <code>flipped_content</code> attributes of the card are converted into template expressions (a kind of Javascript function) so that they render quickly.</p>
</div>
<div class="sect2">
<h3 id="_example_4">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@card intro_part_1 begin
  content: ```
  You are in a mazy of twisty passages all alike.
  [[Go forward|intro_part_2]]
  ```
end

@card intro_part_2 begin
  content: ```
  You get the idea!
  [[Go backward|intro_part_1]]
  ```
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_3">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">primary content to be displayed when this card is played into a scene</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_3">Optional Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flipped_content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">content that is presented after the card is used in a stack layout</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blocks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of element-ids of the cards that can be referenced in the <code>content</code> or <code>flipped_content</code> templates, e.g. <code>[#sidebar]</code> is available as <code>${sidebar}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bindings</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">keys to bindings which can either be game object ids or functions returning a value. E.g. <code>bindings: {player: #player}</code> allows <code>${player.name}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>css_class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">custom CSS classes to apply, "information is-primary"</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_event_handlers_3">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_3">on_init</h4>
<div class="literalblock">
<div class="content">
<pre>on_init: (card, event = {}) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has started.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_enter_2">on_enter</h4>
<div class="literalblock">
<div class="content">
<pre>on_enter: (card, event = {}) =&gt; {...}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_render">on_render</h4>
<div class="literalblock">
<div class="content">
<pre>on_render: (card, event = {}) =&gt; {...}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_ready">on_ready</h4>
<div class="literalblock">
<div class="content">
<pre>on_ready: (card, event = {}) =&gt; {...}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_leave_2">on_leave</h4>
<div class="literalblock">
<div class="content">
<pre>on_leave: (card, event = {}) =&gt; {...}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_notes">Notes</h3>
<div class="paragraph">
<p>Card content is written in Markdown and converted to HTML. It&#8217;s somewhat similar to a Twine passage and some of the basic syntax, e.g. <code>[[Go forward|intro_part_2]]</code> translate across to Rez.</p>
</div>
<div class="paragraph">
<p>However there are a number of additional syntaxes. For example it&#8217;s possible to hijack this mechanism using a script:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@card intro_part_1 begin
  content: ```
  You are in a mazy of twisty passages all alike.
  [[Go forward]]
  ```
  on_go_forward: (game, evt) =&gt; {return Scene.load_card(game, "intro_part_2");}
end</pre>
</div>
</div>
<div class="paragraph">
<p>Here we define an event handler which will respond to the link being clicked. By default Rez will automatically convert a link such as "Go forward" into the equivalent "go_forward" by downcasing and replacing whitespace with a single <code>_</code> character.</p>
</div>
<div class="paragraph">
<p>Rez also has support for more dynamic types of links:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@card intro_part_1 begin
  content: ```
  You are in a mazy of twist passages all alike.
  [[Go forward|go_forward]]
  ```
  go_forward: (game, evt) =&gt; {evt.choice.show("Go forward);}
  on_go_forward: (game, evt) =&gt; {return Scene.load_card(game, "intro_part_2")}
end</pre>
</div>
</div>
<div class="paragraph">
<p>When a card link is written in this format, Rez will look inside the card for an attribute with the same name and a function value. It will call the function which can determine whether the link should be shown or hidden and, if it is shown whether it should be enabled or disabled. whether it is enabled or disabled.</p>
</div>
<div class="paragraph">
<p>However there is support for other kinds of actions and dynamic links. See the <a href="cookbook.html">COOKBOOK</a> for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_declare_directive">Declare (Directive)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>@declare</code> directive is a shorthand for defining an <code>@object</code> element without
attributes. Typically you use this for declaring an object to be the target of
relationships but which does not, itself, need to be defined in terms of a set
of attributes.</p>
</div>
<div class="sect2">
<h3 id="_example_5">Example</h3>
<div class="paragraph">
<p>In this example we are specifying that the player hates the dark (affinity -5)
but we don&#8217;t need "the dark" to be more than a placeholder to be the target of
the relationship</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@declare the_dark
@rel #player #the_dark -5</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_derive_directive">Derive (Directive)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>@derive</code> directive is used to form keywords into hierarchies of types for items, effects, and so on.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take an example of where this might be useful: inventories.</p>
</div>
<div class="paragraph">
<p>We setup a hierarchy as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@derive :weapon :item
@derive :sword :weapon
@derive :mace :weapon
@derive :potion :item</pre>
</div>
</div>
<div class="paragraph">
<p>The result is that an item with <code>type: :sword</code>, <code>type: :mace</code>, or <code>type: :potion</code> can be placed into a slot that <code>accepts: :item</code>. It&#8217;s not required to list all the different types of items that are legal in that slot. Equally our sword can be placed into a slot that <code>accepts: :sword</code> but an item <code>type: :mace</code> cannot, nor can an item <code>type: :potion</code>.</p>
</div>
<div class="paragraph">
<p>An item hierarchy can be as simple of complex as you need. At run-time all of the item type information is converted into tags. For example an item with <code>type: :sword</code> would have tags as if we had written <code>tags: #{:sword :weapon :item}</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_effect">Effect</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Effects are modifiers to aspects of the game that can be applied and removed dynamically as the game progresses.</p>
</div>
<div class="paragraph">
<p>For example an item, when worn, might convey a bonus to the actor wearing it. In this case the effect, attached to the item, is applied when the item is worn and removed when the item is removed.</p>
</div>
<div class="paragraph">
<p>Effect support is limited in v0.8. Effect scripts will be called and its up to the caller to ensure these work. In particular there is no support yet for effects that, for example, wear off over time.</p>
</div>
<div class="sect2">
<h3 id="_example_6">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@effect drunk begin
  name: "Drunk"
  description: "you're drunk, it's so much harder to concentrate"
  on_apply: (evt) =&gt; {
    const actor = $(evt.actor_id);
    // Add drunkness effects
  }
  on_remove: (evt) =&gt; {
    const actor = $(evt.actor_id);
    // Remove drunkness effects
  }
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_4">Required Attributes</h3>

</div>
<div class="sect2">
<h3 id="_optional_attributes_4">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_4">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_4">on_init</h4>
<div class="paragraph">
<p>: <code>(effect, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_apply">on_apply</h4>
<div class="paragraph">
<p>: <code>(effect, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_on_remove">on_remove</h4>
<div class="paragraph">
<p>: <code>(effect, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_on_turn_2">on_turn</h4>
<div class="paragraph">
<p>: <code>(effect, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>If the game turn mechanism is being used this callback will be received on each
game turn. This allows an effect to, for example, grow or decline over time.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faction">Faction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Factions represent in-game groups with their own agenda, reputation, and views
of others. Define a faction using a <code>@faction</code> element.</p>
</div>
<div class="sect2">
<h3 id="_example_7">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@faction police begin
  ...
end

@faction gutman begin
  ...
end

@faction player begin
  ...
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_5">Required Attributes</h3>

</div>
<div class="sect2">
<h3 id="_optional_attributes_5">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_5">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_5">on_init</h4>
<div class="paragraph">
<p>: <code>(faction, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filter_directive">Filter (Directive)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>@filter</code> directive defines a filter function that can be used in a subsitution Template Expression. A filter has a name which is how you refer to it in a template expression, e.g. <code>capitalize</code> and an impl function that takes a variable number of parameters (but at least one).</p>
</div>
<div class="sect2">
<h3 id="_example_8">Example</h3>
<div class="paragraph">
<p>Let&#8217;s say we wanted to be able to output a numeric attribute replacing any value over 4 with "a suffusion of yellow". Here&#8217;s a filter that would do that:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@filter SUFFUSION_OF_YELLOW_FILTER begin
  name: "soyf"
  impl: (n) =&gt; {
    if(n &lt; 4) {
      return ""+n;
    } else {
      return "a suffusion of yellow";
    }
  }
end</pre>
</div>
</div>
<div class="paragraph">
<p>and the expression would be</p>
</div>
<div class="literalblock">
<div class="content">
<pre>${number_value | soyf}</pre>
</div>
</div>
<div class="paragraph">
<p>As of v0.11.0 the Rez stdlib defines a number of filters and you can see how they are implemented by reading the <code>stdlib.rez</code>.</p>
</div>
<div class="paragraph">
<p>See also the filter_catalog.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_game">Game</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The game element is the top-level specification of the game and its metadata. It also defines the scebe entry point of the game.</p>
</div>
<div class="paragraph">
<p>The <code>@game</code> element has an implicit ID of <code>game</code>. All other elements and directives should be nested inside the top-level <code>@game</code>.</p>
</div>
<div class="sect2">
<h3 id="_example_9">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@game begin
  name: "The Maltese Parrot"
  author_name: "Dachshund Hamlet"
  IFID: "D2050DE2-97A2-1ED1-4CCA-AF9D3B0DD883"
  created: "2022-08-31 22:13:43.830755Z"
  version: 10
  layout: ```${content}```
  initial_scene: #sam_and_wonderly_meet
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_6">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name of the game</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initial_scene_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Ref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id of the scene the game begins with</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IFID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the game in the IFID database (an ID will automatically be generated when the game is created, it&#8217;s up to you whether you register it or not)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_6">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_6">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_6">on_init</h4>
<div class="literalblock">
<div class="content">
<pre>on_init: `(game, event = {}) =&gt; {...}`</pre>
</div>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_start">on_start</h4>
<div class="paragraph">
<p>: <code>(game, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>The <code>on_start</code> event is triggered right after the Rez framework has initialized
itself and before the first scene or card gets rendered. It&#8217;s an opportunity
to customise game setup.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_scene_change">on_scene_change</h4>
<div class="paragraph">
<p>: <code>(game, event) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  scene_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>on_scene_change</code> script is called whenever a new scene gets started.</p>
</div>
<div class="paragraph">
<p>The callback happens between the <code>on_finish</code> and <code>on_start</code> scripts of the
scenes that are ending and beginning respectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_card_change">on_card_change</h4>
<div class="paragraph">
<p>: <code>(game, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>The <code>on_card_change</code> script is called whenever a new card is played into the
current scene.</p>
</div>
<div class="paragraph">
<p>The callback happens between the <code>on_leave</code> and <code>on_enter</code> scripts of the card
that is being played.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_group">Group</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A group specifies a collection of assets that can be selected from. Groups can be static by defining the id of member assets, or dynamic by specifying a set of tags. In the latter case the group will collect together all assets with any of the specified tags.</p>
</div>
<div class="paragraph">
<p>A group can be used to select an image at random, or cycle through the collection one-by-one.</p>
</div>
<div class="sect2">
<h3 id="_example_10">Example</h3>

</div>
<div class="sect2">
<h3 id="_required_attributes_7">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keyword</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of <code>:image</code>, <code>:audio</code>, <code>:video</code> which specifies the type of assets the group should contain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>include_tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of tags that appear on assets that should be included in the group</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exclude_tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of tags that appear on assets that should be excluded from the group</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_7">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_7">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_7">on_init</h4>
<div class="literalblock">
<div class="content">
<pre>on_init: (group, event = {}) =&gt; {...}</pre>
</div>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inventory">Inventory</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>@inventory</code> element creates a container that can hold `@item`s through the use of `@slot`s. Rez inventories are deliberately flexible to handle a range of use cases for example working memory (where items are thoughts) or spell books (where items are spells).</p>
</div>
<div class="paragraph">
<p>Rez has a fairly flexible inventory system that is based around 'slots' that define how items can be held. This allows an inventory to hold different kinds of items: you could have an inventory for items as well as an inventory for spells (spell book).</p>
</div>
<div class="paragraph">
<p>Inventory slots are matched against items to determine whether it&#8217;s possible to put an item in a slot.</p>
</div>
<div class="paragraph">
<p>Inventories are defined using the <code>@inventory</code> tag.</p>
</div>
<div class="paragraph">
<p>Inventories have a category which determines the kind of items that can be added to their slots. For example "spell" could represent a spell book, while "equipment" could represent the players inventory.</p>
</div>
<div class="sect2">
<h3 id="_example_11">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@inventory player_inventory begin
  slots: #{#hat_slot #jacket_slot #trousers_slot #shoes_slot #holster_slot}
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_8">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>slots</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of element ids of `@slot`s that are included in this inventory</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_8">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_8">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_8">on_init</h4>
<div class="paragraph">
<p>on_init: (inventory, event = {}) &#8658; {&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has started.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_insert">on_insert</h4>
<div class="paragraph">
<p>on_insert: (inventory, event) &#8658; {&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>event = {
  slot_id: &lt;id&gt;,
  item_id: &lt;id&gt;
}</p>
</div>
<div class="paragraph">
<p>This script will be called when an item has been added to the specified slot of this inventory.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_remove_2">on_remove</h4>
<div class="paragraph">
<p>on_remove: (inventory, event) &#8658; {&#8230;&#8203;}</p>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  slot_id: &lt;id&gt;,
  item_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>This script will be called after an item has been removed from the specified slot of this inventory.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_item">Item</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>@item</code> element defines a conceptual item the player the player (or potentially an NPC) can acquire and add to an inventory. Items don&#8217;t have to represent physical objects but anything a player has for example a spell could be an item or even a memory.</p>
</div>
<div class="paragraph">
<p>Items are required to have a <code>type</code> keyword-attribute that connects them to compatible slots in inventories. That might include a shop, a wardobe, and a players backpack inventories.</p>
</div>
<div class="paragraph">
<p>However the Item/Inventory system is quite flexible so we can also think about spells as Items with the Inventory being a spell-book, or knowledge as Items with an Inventory being memory.</p>
</div>
<div class="paragraph">
<p>Items may be usable in which case they may have a limit to the number of times they can be used.</p>
</div>
<div class="paragraph">
<p>Some items can grant effects, either when the item is acquired, put into a specific slot (e.g. equipped), or when it is used.</p>
</div>
<div class="paragraph">
<p>The can_equip/on_equip scripts are used to decide whether the player can put an item in a given inventory &amp; slot, and to process what happens when doing so.</p>
</div>
<div class="paragraph">
<p>For example equipping a magic ring might confer an effect on the player. But first it may be necessary to check that the player doesn&#8217;t already have a magic ring equipped.</p>
</div>
<div class="paragraph">
<p>A potion on the other hand confers no effect until it is used and might have only one use after which is presumed to be consumed.</p>
</div>
<div class="sect2">
<h3 id="_example_12">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@item black_fedora begin
  type: :hat
  description: "black fedora"
  wearable: true
  description: "A Messer wool fedora hat. Classy."
end</pre>
</div>
</div>
<div class="paragraph">
<p>Note that this example throws up a design issue to be aware of: tags and boolean attributes are equivalent. For example <code>wearable: true</code> can also be represented by presence or absence of a tag <code>wearable</code>. In the case of <code>Item</code> elements its further possible to use the type system:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@derive :wearable :item
@derive :hat :wearable</pre>
</div>
</div>
<div class="paragraph">
<p>In this case an <code>Item</code> with <code>type: :hat</code> will automatically be tagged as <code>:wearable</code> and <code>:item</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_9">Required attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keyword</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a keyword representing the type of the item, e.g. <code>:hat</code> that has optionally been `@derived&#8217;d</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the name of the item</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_9">Optional attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String|Heredoc|Template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">player description of the item</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">where inventories should manage size, defaults to <code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>usable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if the item can be used, defaults to <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uses</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if <code>usable</code> is true, number of uses, assumed &gt;= 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>container</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Ref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Container this item begins the game inside</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_equip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>can_equip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>can_use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_event_handlers_9">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_9">on_init</h4>
<div class="paragraph">
<p>: <code>(item, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_location">Location</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Locations in Rez are an optional concept that can be used to create a "stage" for one or more scenes. In cases where different scenes may play out in one virtual location it may make sense to use a location to represent what is the same about the background. If scenes and cards get the job done, you don&#8217;t have to worry about using locations.</p>
</div>
<div class="paragraph">
<p>Locations are defined using the <code>@location</code> tag.</p>
</div>
<div class="sect2">
<h3 id="_example_13">Example</h3>

</div>
<div class="sect2">
<h3 id="_required_attributes_10">Required Attributes</h3>

</div>
<div class="sect2">
<h3 id="_optional_attributes_10">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_10">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_10">on_init</h4>
<div class="paragraph">
<p>: <code>(location, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_list">List</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A list is a named collection of values that can be used by other in-game elements, for example lists of names, locations, actors, and so on. Lists are defined using the <code>@list</code> element.</p>
</div>
<div class="paragraph">
<p>The run-time API supports selecting randomly from lists including with &amp; without replacement.</p>
</div>
<div class="sect2">
<h3 id="_example_14">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@list antagnoists begin
  content: [#sam_spade #miss_wonderly #kaspar_gutman #joel_cairo]
end

@list lines begin
  content: [
    "I distrust a man that says when. If he's got to be careful not to drink to much it's because he's not to be trusted when he does."
    "The cheaper the crook, the gaudier the patter."
    "I couldn't be fonder of you if you were my own son. But, well, if you lose a son, its possible to get another. There's only one Maltese Falcon."
    "What do you want me to do, learn to stutter?"
  ]
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_11">Required Attributes</h3>

</div>
<div class="sect2">
<h3 id="_optional_attributes_11">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_11">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_11">on_init</h4>
<div class="paragraph">
<p>: <code>(list, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has started.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_object">Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <code>@object</code> element describes an author-driven concept. Isn&#8217;t everything in Rez an object of some kind? Yes, but elements like <code>@author</code>, <code>@item</code>, and <code>@plot</code> have built-in meaning and functionality. By contrast <code>@object</code> is a blank canvas that an author can use for anything they think of.</p>
</div>
<div class="sect2">
<h3 id="_example_15">Example</h3>
<div class="paragraph">
<p>Imagine we are building a role-playing game and we want to introduce the notion skills and perks. Rez does not provide either of these concepts out of the box but we can use the <code>@object</code> element to make them ourselves.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@object skill begin
  $template: true
  description: "Something an actor has acquired the ability to do"
  min: 0
  max: 5
  cur: 0
end

@alias skill = object&lt;skill&gt;

@object perk begin
  $template: true
  cost: 1
end

@alias perk = object&lt;perk&gt;

@perk gun_license begin
  description: "Without this cops might pick you up for flashing your lead pumper."
end

@perk dont_go_down_easy begin
  description: "Takes more than a bullet to put you down."
end

@perk beguile begin
  description: "One look into your eyes and they're putty in your hands."
  cost: 2
end

@skill puzzling begin
  description: "Figuring out how the clues fit together."
  ...
end

@skill gunplay begin
  description: "Shooting straight, esp. when it matters."
  ...
end

@skill drinking begin
  description: "Hold your liquour, yes sir!"
  ...
end

@skill fisticuffs begin
  description: "Marquis of Queensbury be damned, hit 'em where it hurts."
  ...
end

@skill intimidate begin
  description: "You don't actually **need** to shoot 'em."
  ...
end

@skill evade begin
  description: "Never end up in the wrong place at the wrong time."
  ...
end

@skill fast_talk begin
  description: "They'll think it was you doing a favour for them!"
  ...
end

@skill scheming begin
  description: "They'll never see it coming."
  ...
end</pre>
</div>
</div>
<div class="paragraph">
<p>In a real-game we&#8217;d expect to see more definition of what skills &amp; perks do but at least we can talk about them meaningfully even though Rez knows nothing about them. As a consequence Rez cannot validate them or their attributes.</p>
</div>
<div class="paragraph">
<p>Extra care should be taken here that they are well-formed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plot">Plot</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_example_16">Example</h3>

</div>
<div class="sect2">
<h3 id="_required_attributes_12">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>priority</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">from 1 to 100, higher priorities break plot deadlocks</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_12">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_12">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_12">on_init</h4>
<div class="paragraph">
<p>: <code>(plot, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relationship">Relationship</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>@rel</code> directive describes the relationship between two game elements called the <code>source</code> (the element which has the relationship) and the <code>target</code> (the element the relationship is about).</p>
</div>
<div class="paragraph">
<p>A relationship is unidirectional from source to target. Where applicable use a second <code>@rel</code> to describe the relationship in the opposite direction.</p>
</div>
<div class="paragraph">
<p>Each relationship has an <code>affinity</code> which is a value from -5 (maximum negative) to +5 (maximum positive).</p>
</div>
<div class="paragraph">
<p>A relationship may, optionally, carry a set of tags to add flavour.</p>
</div>
<div class="paragraph">
<p>A relationship can be specified between any two elements with an id.</p>
</div>
<div class="paragraph">
<p>To keep the number of relationships manageable it may be preferable to setup relationships between <a href="#_faction">Factions</a> rather than specific actors as demonstrated in the examples below. However you can setup relationships in any combination you like.</p>
</div>
<div class="sect2">
<h3 id="_example_17">Example</h3>
<div class="paragraph">
<p>The <code>@rel</code> element does not follow the usual element syntax. Instead it looks like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@rel source_id target_id affinity_value #{optional tags}</pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll notice there&#8217;s no id and no <code>begin</code> &amp; <code>end</code> and, consequently, no attributes. Here are a couple of examples:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@rel #player_faction #gutman_faction -2
@rel #gutman_faction #player_faction 0</pre>
</div>
</div>
<div class="paragraph">
<p>The id of a relationship is auto-generated:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>rel_&lt;source id&gt;_&lt;target id&gt;
rel_player_gutman</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getRelationship(source, target)</code> API on the <code>RezGame</code> object is a short-
hand for doing this lookup manually.</p>
</div>
<div class="paragraph">
<p>We can use <code>@rel</code> to define all kinds of relationships:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%% the Gutman faction loves the Falcon
@declare falcon
@rel #gutman_faction #falcton 5

%% the player hates brocolli
@declare brocolli
@rel #player #brocolli -5</pre>
</div>
</div>
<div class="paragraph">
<p>When we want to add more context to a relationship we can use tags:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@rel #player #miss_wannalee 5 #{:lover :suspicious}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_13">Required Attributes</h3>
<div class="ulist">
<ul>
<li>
<p><code>source</code> [Element Ref]: element that holds the relationship</p>
</li>
<li>
<p><code>target</code> [Element Ref]: element to which the relationship refers</p>
</li>
<li>
<p><code>affinity</code> [Number]: from -5.0 to +5.0 indicating the strength of the relationship positive or negative</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_optional_attributes_13">Optional Attributes</h3>
<div class="ulist">
<ul>
<li>
<p><code>tags</code> [Set]: keywords</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_event_handlers_13">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_13">on_init</h4>
<div class="literalblock">
<div class="content">
<pre>on_init: (relationship, event) =&gt; {...}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_change_affinity">on_change_affinity</h4>
<div class="literalblock">
<div class="content">
<pre>on_change_affinity: (relationship, event) =&gt; {...}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  prior: previous affinity value,
  current: updated affinity value
}</pre>
</div>
</div>
<div class="paragraph">
<p>This event handler will be called whenever the relationship affinity changes and will be passed the prior &amp; new affinity values.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scene">Scene</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Game in Rez is authored in terms of <code>@scene`s and `@card`s. Each `@card</code> represents some content that is presented to the player. By contrast the <code>@scene</code> represent the structure and intelligence about which `@card`s to represent and how to respond to player input.</p>
</div>
<div class="paragraph">
<p>If you are familiar with Twine then a <code>@card</code> is roughly equivalent to a Twine passage. A Twine game is one long stream of passages woven together. Rez differs from Twine in that it uses the <code>@scene</code> to organise how the player interacts with the game and which/how the content is presented.</p>
</div>
<div class="paragraph">
<p>For example you might use different scenes for moving around the map, examining items, interacting with NPCs, buying from shops, and so on. You don&#8217;t have to, you could implement the game in a single scene, but the different layout and event handling possibilities make it easier.</p>
</div>
<div class="paragraph">
<p>A <code>@scene</code> requires an <code>initial_card: #card_ref</code> attribute that identifies the card that will be rendered when the scene begins. Additionally it requires a <code>layout:</code> attribute that specifies the surrounding markup.</p>
</div>
<div class="paragraph">
<p>Within the layout using the <code>${content}</code> template expression to specify where scene content is inserted.</p>
</div>
<div class="paragraph">
<p>A <code>@scene</code> requires a <code>layout_mode:</code> attribute which must be either <code>:single</code> or <code>:stack</code>. In the <code>:single</code> layout mode only a single <code>@card</code> is ever displayed. While in <code>:stack</code> mode each new <code>@card</code> is layed out after the previous one.</p>
</div>
<div class="paragraph">
<p>Lastly a <code>@scene</code> may optionally have a <code>blocks: [#card_id_1 #card_id_2 &#8230;&#8203;]</code> attribute. Each referenced <code>@card</code> will be rendered and it&#8217;s content can be inserted into the layout using <code>${card_id_1}</code>, <code>${card_id_2}</code>, etc.</p>
</div>
<div class="sect2">
<h3 id="_example_18">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@scene introduction begin
  title: "Introduction"
  initial_card: #intro_part_1
  blocks: [#sidebar_1 #sidebar_2]
  layout_mode: :single
  layout: """
    &lt;div class="sidebar"&gt;
      {{{sidebar_1}}}
      {{{sidebar_2}}}
    &lt;/div&gt;
    &lt;div&gt;
      {{{content}}}
    &lt;/div&gt;
  """
  on_new_card: (game, evt) =&gt; {...}
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_14">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">what you present to the user to tell them what scene they are in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initial_card_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element Ref</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id of the <code>@card</code> that is played when the scene begins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>layout_mode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keyword</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of <code>:single</code> for one-card-at-a-time and <code>:stack</code> for multi-card scenes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>layout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">template containing the scene content in which cards are embedded</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_14">Optional Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bindings</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#_card">Card</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blocks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#_card">Card</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>layout_reverse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In reverse mode new cards are played at the top of the stack (default: false)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>layout_separator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Markup content to be inserted between cards when in stack mode (defaults: "")</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_event_handlers_14">Event Handlers</h3>
<div class="paragraph">
<p>Scenes support a range of events:</p>
</div>
<div class="sect3">
<h4 id="_on_init_14">on_init</h4>
<div class="paragraph">
<p>: <code>(scene, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>The <code>on_init</code> script is called during game initialization and before the player has been able to take any actions. It will be passed an empty map of arguments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_start_2">on_start</h4>
<div class="paragraph">
<p>: <code>(scene, event) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  card_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>on_start</code> script is called when a new scene is started. It will receive a map containing the scene_id.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_finish">on_finish</h4>
<div class="paragraph">
<p>: <code>(scene, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>The <code>on_finish</code> script is called when a scene has eneded.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_interrupt">on_interrupt</h4>
<div class="paragraph">
<p>: <code>(scene, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>The <code>on_interrupt</code> script is called when a scene is being interrupted by an interlude.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_resume">on_resume</h4>
<div class="paragraph">
<p>: <code>(scene, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>The <code>on_resume</code> script is called when a scene is being resumed after an interlude.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_render_2">on_render</h4>
<div class="paragraph">
<p>: <code>(scene, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>The <code>on_render</code> script is called every time the scene is being rendered.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_start_card">on_start_card</h4>
<div class="paragraph">
<p>: <code>(scene, event) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  card_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>on_start_card</code> script is called when a new card is played into the scene. It will be passed a map containing the id of the card that has been played.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_finish_card">on_finish_card</h4>
<div class="paragraph">
<p>: <code>(scene, event) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  card_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>on_finish_card</code> script is called when when a card has 'finished' as a new card is being played into the scene. It will be passed the id of the card that is finished.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_script_directive">Script (Directive)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A script is used to include arbitrary Javascript code into the compiled game. Specify a script using the <code>@script</code> directive.</p>
</div>
<div class="paragraph">
<p>The <code>@script</code> directive consists of a string containing the code to include between <code>begin</code> and <code>end</code> markers. Note that the Javascript code should not include the term "end" as this will cause the parser to fail. In a future version a more robust approach will be included.</p>
</div>
<div class="paragraph">
<p>The code defined in the game&#8217;s <code>@script</code> directives will be automatically included as &lt;script&gt; tags before the end of the &lt;body&gt; element of the generated HTML template.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_19">Example</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>@script begin
  function customFunction() {
    // Javascript code here
  }
end</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_slot">Slot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>@slot</code> describes a component of an <code>@inventory</code> so that an inventory can hold different types of things.</p>
</div>
<div class="paragraph">
<p>For example an inventory representing what a player is wearing might have slots for coats, trousers, and so forth while an inventory representing a spell book might have slots for different levels of spell.</p>
</div>
<div class="paragraph">
<p>See also: <a href="#Type Hierarchy">[Type Hierarchy]</a></p>
</div>
<div class="sect2">
<h3 id="_example_20">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@slot holster_slot begin
  accepts: :pistol
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_15">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name of the slot e.g. "Holster" that could be displayed to the player</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>accepts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keyword</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a keyword representing the type of <a href="#_item">Items</a> that are permitted to be in the slot</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_15">Optional Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>capacity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the sum of the sizes of <code>@item`s that fit in the slot, see <a href="#_item">Item</a> `size</code> attribute</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_event_handlers_15">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_15">on_init</h4>
<div class="paragraph">
<p>: <code>(slot, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has
started.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_insert_2">on_insert</h4>
<div class="paragraph">
<p>: <code>(slot, event) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  inventory: &lt;id&gt;,
  item: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>When an <code>@item</code> is placed into a <code>@slot</code> the <code>on_insert</code> event handler will be
called.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>on_insert: (inventory_id, item_id) =&gt; {
  // Do something
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_on_remove_3">on_remove</h4>
<div class="paragraph">
<p>: <code>(slot, event) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>event = {
  inventory_id: &lt;id&gt;,
  item_id: &lt;id&gt;
}</pre>
</div>
</div>
<div class="paragraph">
<p>When an <code>@item</code> is taken out of an inventory <code>@slot</code> the <code>on_remove</code> event
handler will be called.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>on_remove: (inventory_id, item_id) =&gt; {
  // Do something
}</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_style_directive">Style (Directive)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A style is used to include arbitrary CSS into the compiled game. Specify a style using the <code>@style</code> directive.</p>
</div>
<div class="paragraph">
<p>The <code>@style</code> directive consists of a string containing the CSS to include between <code>begin</code> and <code>end</code> markers.</p>
</div>
<div class="paragraph">
<p>The styles defined in the game&#8217;s <code>@style</code> directives will be automatically included as &lt;style&gt; tags before the end of the &lt;head&gt; element of the generated HTML template.</p>
</div>
<div class="sect2">
<h3 id="_example_21">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@style begin
  .card {
    /* My custom styles here */
  }
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_16">Required Attributes</h3>

</div>
<div class="sect2">
<h3 id="_optional_attributes_16">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_16">Event Handlers</h3>

</div>
<div class="sect2">
<h3 id="_api">API</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_system">System</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>@system</code> element describes an in-game author defined <strong>system</strong>. By that we mean a process that can run that queries and, optionally, updates the state of the game world. In-game a system is represented by a <a href="jsapi.html#RezSystem">RezSystem</a> object.</p>
</div>
<div class="paragraph">
<p>For example we might want to model weather in our game so we could create a "weather system" that would update the in-game weather.</p>
</div>
<div class="paragraph">
<p>Rez uses the notion of a "tick" (as in, when the clock ticks) for running systems using the <a href="jsapi.html#RezGame">RezGame</a> <code>runTick()</code> API.</p>
</div>
<div class="sect2">
<h3 id="_example_22">Example</h3>
<div class="literalblock">
<div class="content">
<pre>%% Here is a system that maintains wall clock time, advancing the clock
%% by one hour on each game tick. It also maintains a description of the
%% hour in terms of morning, afternoon, etc

@system clock_system begin
  enabled: true
  priority: 1

  wallTime: 0
  description: ""

  on_tick: (system, evt) =&gt; {
    this.wallTime += 1;
    if(this.wallTime &gt; 18) {
      this.description = "evening";
    } else if(this.wallTime &gt; 12) {
      this.description = "afternoon";
    } else if(this.wallTime &gt; 6) {
      this.description = "morning";
    } else {
      this.description = "night";
    }
  }
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_17">Required Attributes</h3>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code> [Boolean]: if false, this system will not be run</p>
</li>
<li>
<p><code>priority</code> [Number]: systems are run in priority order</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_optional_attributes_17">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_17">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_16">on_init</h4>
<div class="paragraph">
<p>: <code>(system, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has started.</p>
</div>
</div>
<div class="sect3">
<h4 id="_on_tick">on_tick</h4>
<div class="paragraph">
<p>: `(system, event = {}) &#8658; {&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>As long as the system <code>enabled</code> attribute is <code>true</code> this script will be called every time the <code>RezGame</code> method <code>runTick</code> is called.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_task_directive">Task (Directive)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tasks are elements that describe components of a behaviour tree. Author defined tasks are usually <strong>conditions</strong> (that test the state of the game) and <strong>actions</strong> (that change the state of the game). The built in tasks provided in the stdlib are <strong>composites</strong> (that work on groups of tasks) and <strong>decorators</strong> (that modify the meaning of other tasks)</p>
</div>
<div class="paragraph">
<p>Note that, by convention, we use UPPER CASE ids for task elements.</p>
</div>
<div class="paragraph">
<p>The core of the task is the execute attribute which implements the functionality of the task and returns a value indicating success or failure.</p>
</div>
<div class="paragraph">
<p>Optionally a task can update the working memory that is passed through the tree as it gets executed.</p>
</div>
<div class="sect2">
<h3 id="_example_23">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@task ACTOR_IN begin
  options: [:actor :location]

  execute: (task, wmem) =&gt; {
    const actor_id = task.option("actor");
    const actor = task.$(actor_id);
    const location_id = task.option("location");
    if(actor.location == location_id) {
      return {success: true, wmem: wmem};
    } else {
      return {success: false, error: "Actor is not in location", wmem: wmem};
    }
  }
end</pre>
</div>
</div>
<div class="paragraph">
<p>In this example we have defined a condition task to test whether a specified actor is in a given location. This could be used in a sequence to ensure that an action only gets performed if in the correct location.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>^[SEQUENCE [
  [ACTOR_IN actor=sam_spade location=sams_office]
  [ACTOR_RELOADS item=sams_gun]]]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_18">Required Attributes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>options</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">keywords describing the options that this behaviour uses. If there are no options use the empty list <code>[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>execute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">script that takes two parameters <code>task</code> (a reference to the task itself) and <code>wmem</code> which is a reference to a map of "working memory" that can be used to record task state or pass state between tasks. The return value must either be a map that is either <code>{success: true, wmem: wmem}</code> or <code>{success: false, error: "Message", wmem: wmem}</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_optional_attributes_18">Optional Attributes</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_zone">Zone</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>@zone</code> element defines a map zone which is an abstract representation of a region which groups logically related locations together. In-game a zone is represented by a <a href="jsapi.html#RezZone">RezZone</a> object.</p>
</div>
<div class="paragraph">
<p>For example a zone could represent a planet, a building, a street, or a shopping mall with a location defining a specific areas of each.</p>
</div>
<div class="paragraph">
<p>The idea is that locations in the same zone can be reached easily while locations in different zones may require a specific transition.</p>
</div>
<div class="paragraph">
<p>For example a player can walk between locations in the "downtown" zone but might need to use a cab to reach the connected "suburbs" zone. A cab rank location in each zone could act as the gateway to the other zones and their locations.</p>
</div>
<div class="paragraph">
<p>Individual locations must be defined in a zone. If you don&#8217;t require multiple zones just create a single zone and define all your locations in it.</p>
</div>
<div class="sect2">
<h3 id="_example_24">Example</h3>
<div class="literalblock">
<div class="content">
<pre>@zone docks begin
  @location la_paloma_gangway begin
    ...
  end

  @location la_paloma_bridge begin
    ...
  end

  @location docks_cabrank begin
    ...
  end
end

@zone spade_and_archer begin
  @location street_cabrank begin
    ...
  end

  @location hallway begin
    ...
  end

  @location outer_office begin
    ...
  end

  @location sams_office begin
    ...
  end
end</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_attributes_19">Required Attributes</h3>

</div>
<div class="sect2">
<h3 id="_optional_attributes_19">Optional Attributes</h3>

</div>
<div class="sect2">
<h3 id="_event_handlers_18">Event Handlers</h3>
<div class="sect3">
<h4 id="_on_init_17">on_init</h4>
<div class="paragraph">
<p>: <code>(zone, event = {}) &#8658; {&#8230;&#8203;}</code></p>
</div>
<div class="paragraph">
<p>This script will be called during game initialization and before the game has started.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-09-15 00:40:14 +0100
</div>
</div>
</body>
</html>