<!DOCTYPE html>
<!-- Autogenerated with Rez v<%= Rez.version() %> -->
<!-- Modifications will be overwritten -->
<% alias Rez.AST.Asset %>
<% alias Rez.AST.NodeHelper %>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="author" content="<%= NodeHelper.get_attr_value(@game, "author_name") %>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= NodeHelper.get_attr_value(@game, "title") %></title>
    <%= for {:string, url} <- NodeHelper.get_attr_value(@game, "links", []) do %>
      <link rel="stylesheet" href="<%= url %>">
    <% end %>
    <%= for js_asset <- @js_pre_runtime_assets do %>
      <%= Asset.asset_tag(js_asset) %>
    <% end %>
    <script src="assets/runtime.js"></script>
    <%= for js_asset <- @js_post_runtime_assets do %>
      <%= Asset.asset_tag(js_asset) %>
    <% end %>
    <%= for style_asset <- @style_assets do %>
      <%= Asset.asset_tag(style_asset) %>
    <% end %>
    <style type="text/css">
      /* Custom game styles */
      <%= for style <- @styles do %>
        <%= style.styles %>
      <% end %>
    </style>
  </head>
  <body>
    <div id="game-container">
      <!-- Game output will be inserted here -->
    </div>
    <%= for {:string, url} <- NodeHelper.get_attr_value(@game, "scripts", []) do %>
      <script src="<%= url %>"></script>
    <% end %>
    <script type="text/javascript">
      // Custom game scripts
      <%= for script <- @scripts do %>
        <%= script.script %>
      <% end %>
    </script>
  </body>
  <script>
    $game.start("game-container");
  </script>
  <script>
  <%= for {:list_binding, {js_event_name, {:literal, {:string, rez_event_name}}}} <- NodeHelper.get_attr_value(@game, "start_events", %{}) do %>
    document.addEventListener('<%= js_event_name %>', () => {
      $game.eventProcessor.handleCustomEvent("<%= rez_event_name %>", {});
    });
  <% end %>
  </script>
</html>
