<!DOCTYPE html>
<!-- Autogenerated with Rez v<%= Rez.version() %> -->
<!-- Modifications will be overwritten -->
<% alias Rez.AST.{Asset, NodeHelper} %>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="author" content="<%= NodeHelper.get_attr_value(@game, "author_name") %>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= NodeHelper.get_attr_value(@game, "title") %></title>
    <%= for {:string, url} <- NodeHelper.get_attr_value(@game, "links", []) do %>
      <link rel="stylesheet" href="<%= url %>">
    <% end %>
    <%= for {_asset_id, asset} <- @game.assets do %>
      <%= if Asset.script_asset?(asset) && Asset.pre_runtime?(asset) do %>
        <%= Asset.asset_tag(asset) %>
      <% end %>
    <% end %>
    <script src="assets/runtime.js"></script>
    <%= for {_asset_id, asset} <- @game.assets do %>
      <%= if Asset.style_asset?(asset) || Asset.script_asset?(asset) && !Asset.pre_runtime?(asset) do %>
        <%= Asset.asset_tag(asset) %>
      <% end %>
    <% end %>

    <style type="text/css">
      /* Custom game styles */
      <%= for style <- @game.styles do %>
        <%= style.styles %>
      <% end %>
    </style>
  </head>
  <body>
    <div id="game-container">
      <!-- Game output will be inserted here -->
    </div>
    <%= for {:string, url} <- NodeHelper.get_attr_value(@game, "scripts", []) do %>
      <script src="<%= url %>"></script>
    <% end %>
    <script type="text/javascript">
      // Custom game scripts
      <%= for script <- @game.scripts do %>
        <%= script.code %>
      <% end %>
    </script>
  </body>
  <script>
    $game.start("game-container");
  </script>
</html>
